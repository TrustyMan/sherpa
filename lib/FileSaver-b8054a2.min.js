var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(p){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var y=p.document,h=function(){return p.URL||p.webkitURL||p},m=y.createElementNS("http://www.w3.org/1999/xhtml","a"),E=!p.externalHost&&"download"in m,g=p.webkitRequestFileSystem,O=p.requestFileSystem||g||p.mozRequestFileSystem,i=function(e){(p.setImmediate||p.setTimeout)(function(){throw e},0)},S="application/octet-stream",R=0,b=[],e=function(){for(var e=b.length;e--;){var t=b[e];"string"==typeof t?h().revokeObjectURL(t):t.remove()}b.length=0},N=function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){i(e)}}},n=function(o,n){var e,r,t,i,a,u=this,c=o.type,d=!1,f=function(){var e=h().createObjectURL(o);return b.push(e),e},s=function(){N(u,"writestart progress write writeend".split(" "))},l=function(){!d&&e||(e=f()),r?r.location.href=e:window.open(e,"_blank"),u.readyState=u.DONE,s()},v=function(e){return function(){if(u.readyState!==u.DONE)return e.apply(this,arguments)}},w={create:!0,exclusive:!1};if(u.readyState=u.INIT,n||(n="download"),E)return e=f(),m.href=e,m.download=n,i=m,(a=y.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,p,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(a),u.readyState=u.DONE,void s();p.chrome&&c&&c!==S&&(t=o.slice||o.webkitSlice,o=t.call(o,0,o.size,S),d=!0),g&&"download"!==n&&(n+=".download"),(c===S||g)&&(r=p),O?(R+=o.size,O(p.TEMPORARY,R,v(function(e){e.root.getDirectory("saved",w,v(function(e){var t=function(){e.getFile(n,w,v(function(n){n.createWriter(v(function(t){t.onwriteend=function(e){r.location.href=n.toURL(),b.push(n),u.readyState=u.DONE,N(u,"writeend",e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&l()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=u["on"+e]}),t.write(o),u.abort=function(){t.abort(),u.readyState=u.DONE},u.readyState=u.WRITING}),l)}),l)};e.getFile(n,{create:!1},v(function(e){e.remove(),t()}),v(function(e){e.code===e.NOT_FOUND_ERR?t():l()}))}),l)}),l)):l()},t=n.prototype,o=function(e,t){return new n(e,t)};return t.abort=function(){this.readyState=this.DONE,N(this,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,p.addEventListener("unload",e,!1),o.unload=function(){e(),p.removeEventListener("unload",e,!1)},o}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});
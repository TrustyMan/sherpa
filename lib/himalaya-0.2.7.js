!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).himalaya=e()}}(function(){return function o(s,i,u){function c(r,e){if(!i[r]){if(!s[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(f)return f(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=i[r]={exports:{}};s[r][0].call(a.exports,function(e){var t=s[r][1][e];return c(t||e)},a,a.exports,o,s,i,u)}return i[r].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,r){"use strict";function u(e){return"number"==typeof e&&isNaN(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.startsWith=function(e,t,r){return e.substr(r||0,t.length)===t},r.endsWith=function(e,t,r){var n=(r||e.length)-t.length,a=e.lastIndexOf(t,n);return-1!==a&&a===n},r.stringIncludes=function(e,t,r){return-1!==e.indexOf(t,r||0)},r.isRealNaN=u,r.arrayIncludes=function(e,t,r){var n=e.length;if(0===n)return!1;var a=0|r,o=u(t),s=0<=a?a:n+a;for(;s<n;){var i=e[s++];if(i===t)return!0;if(o&&u(i))return!0}return!1}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.default=function o(e){return e.map(function(e){var t=s(e.type);if("Element"===t){var r=e.tagName.toLowerCase(),n=d(e.attributes),a=o(e.children);return{type:t,tagName:r,attributes:n,children:a}}return{type:t,content:e.content}})},r.capitialize=s,r.camelCase=c,r.castValue=f,r.unquote=l,r.splitHead=p,r.formatAttributes=d,r.formatStyles=v;var u=e("../compat");function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e){return e.split("-").reduce(function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)})}function f(e){if("string"!=typeof e)return e;if(""===e)return e;var t=+e;return isNaN(t)?e:t}function l(e){var t=e.charAt(0),r=e.length-1;return'"'===t||"'"===t&&t===e.charAt(r)?e.slice(1,r):e}function p(e,t){var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}function d(e){return e.reduce(function(e,t){var r=p(t.trim(),"="),n=i(r,2),a=n[0],o=n[1];if(o=o?l(o):a,"class"===a)e.className=o.split(" ");else if("style"===a)e.style=v(o);else if((0,u.startsWith)(a,"data-")){e.dataset=e.dataset||{};var s=c(a.slice(5));e.dataset[s]=f(o)}else e[c(a)]=f(o);return e},{})}function v(e){return e.trim().split(";").map(function(e){return e.trim().split(":")}).reduce(function(e,t){var r=i(t,2),n=r[0],a=r[1];if(a){var o=c(n.trim()),s=f(a.trim());e[o]=s}return e},{})}},{"../compat":1}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseDefaults=void 0,r.parse=u;var a=n(e("./lexer")),o=n(e("./parser")),s=n(e("./formats/v0"));function n(e){return e&&e.__esModule?e:{default:e}}var i=r.parseDefaults={voidTags:["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],closingTags:["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"],childlessTags:["style","script","template"],format:s.default};function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i,r=(0,a.default)(e,t),n=(0,o.default)(r,t);return(0,s.default)(n,t)}r.default={parse:u,parseDefaults:i}},{"./formats/v0":2,"./lexer":4,"./parser":5}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r={str:e,options:t,cursor:0,tokens:[]};return n(r),r.tokens},r.lex=n,r.lexText=p,r.lexComment=s,r.lexTag=i,r.lexTagName=d,r.lexTagAttributes=v,r.lexSkipTag=u;var k=e("./compat");function l(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){for(var t=e.str,r=t.length;e.cursor<r;){if("<"!==t.charAt(e.cursor))p(e);else if((0,k.startsWith)(t,"!--",e.cursor+1))s(e);else{var n=i(e);if(n){var a=n.toLowerCase(),o=e.options.childlessTags;(0,k.arrayIncludes)(o,a)&&u(n,e)}}}}function p(e){var t=e.str,r=e.cursor,n=t.indexOf("<",r);if(-1===n){var a=t.slice(r);return e.cursor=t.length,void e.tokens.push({type:"text",content:a})}if(n!==r){var o=t.slice(r,n);e.cursor=n,e.tokens.push({type:"text",content:o})}}function s(e){e.cursor+=4;var t=e.str,r=e.cursor,n=t.indexOf("--\x3e",r),a="comment";if(-1===n){var o=t.slice(r);return e.cursor=t.length,void e.tokens.push({type:a,content:o})}var s=t.slice(r,n);e.cursor=n+3,e.tokens.push({type:a,content:s})}function i(e){var t=e.str,r="/"===t.charAt(e.cursor+1);e.tokens.push({type:"tag-start",close:r}),e.cursor+=r?2:1;var n=d(e);v(e);var a="/"===t.charAt(e.cursor);return e.tokens.push({type:"tag-end",close:a}),e.cursor+=a?2:1,n}function d(e){for(var t=e.str,r=e.cursor,n=t.length,a=r;a<n;){var o=t.charAt(a);if(!(" "===o||"/"===o||">"===o))break;a++}for(var s=a+1;s<n;){var i=t.charAt(s);if(!!(" "===i||"/"===i||">"===i))break;s++}e.cursor=s;var u=t.slice(a,s);return e.tokens.push({type:"tag",content:u}),u}function v(e){for(var t=e.str,r=e.tokens,n=e.cursor,a=null,o=n,s=[],i=t.length;n<i;){var u=t.charAt(n);if(a){u===a&&(a=null),n++}else{if("/"===u||">"===u){n!==o&&s.push(t.slice(o,n));break}if(" "===u)n!==o&&s.push(t.slice(o,n)),o=n+1,n++;else("'"===u||'"'===u)&&(a=u),n++}}e.cursor=n;for(var c=s.length,f="attribute",l=0;l<c;l++){var p=s[l];if(p&&p.length){if(-1===p.indexOf("=")){var d=s[l+1];if(d&&(0,k.startsWith)(d,"=")){if(1<d.length){var v=p+d;r.push({type:f,content:v}),l+=1;continue}var h=s[l+2];if(l+=1,h){var y=p+"="+h;r.push({type:f,content:y}),l+=1;continue}}}if((0,k.endsWith)(p,"=")){var g=s[l+1];if(g&&!(0,k.stringIncludes)(g,"=")){var m=p+g;r.push({type:f,content:m}),l+=1;continue}var b=p.slice(0,-1);r.push({type:f,content:b})}else r.push({type:f,content:p})}}}function u(e,t){for(var r=t.str,n=t.cursor,a=t.tokens,o=r.length,s=n;s<o;){var i=r.indexOf("</",s);if(-1===i){p(t);break}var u={str:r,cursor:i+2,tokens:[]},c=d(u);if(e.toLowerCase()===c.toLowerCase()){var f=r.slice(n,i);a.push({type:"text",content:f});v(u),a.push.apply(a,[{type:"tag-start",close:!0}].concat(l(u.tokens),[{type:"tag-end",close:!1}])),t.cursor=u.cursor+1;break}s=u.cursor}}},{"./compat":1}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r={tagName:null,children:[]};return g({tokens:e,options:t,cursor:0,stack:[r]}),r.children},r.parse=g;var y=e("./compat");function g(e){for(var t=e.tokens,r=e.options,n=e.stack,a=n[n.length-1].children,o=t.length,s=e.cursor;s<o;){var i=t[s];if("tag-start"===i.type){var u=t[++s];s++;var c=u.content.toLowerCase();if(i.close){for(var f=void 0;(f=n.pop())&&c!==f.tagName;);for(;s<o;){if("tag-end"!==t[s].type)break;s++}break}if((0,y.arrayIncludes)(r.closingTags,c))for(var l=n.length-1;0<l;){if(c===n[l].tagName){a=(n=n.slice(0,l))[l-1].children;break}l-=1}for(var p=[],d=void 0;s<o&&"tag-end"!==(d=t[s]).type;)p.push(d.content),s++;s++;var v=[];if(a.push({type:"element",tagName:u.content,attributes:p,children:v}),!(d.close||(0,y.arrayIncludes)(r.voidTags,c))){n.push({tagName:c,children:v});var h={tokens:t,options:r,cursor:s,stack:n};g(h),s=h.cursor}}else a.push(i),s++}e.cursor=s}},{"./compat":1}]},{},[3])(3)});